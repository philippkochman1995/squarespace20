<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Get 20% off your Squarespace site</title>
<meta content="Get 20% off your annual Squarespace subscription. Enter your email and (optional) theme link. We'll create a trial and you'll get the invite from Squarespace." name="description"/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    :focus-visible { outline: 2px solid currentColor; outline-offset: 2px; }
    html, body { height: 100%; }
  </style>
</head>
<body class="bg-white text-gray-900 antialiased">
<main class="min-h-full flex items-start">
<div class="mx-auto w-full max-w-md px-4 pt-14 pb-8">
<!-- Hero -->
<header class="text-left">
<h1 class="text-4xl sm:text-4xl font-semibold tracking-tight">
    Get 20% off your<br/>Squarespace site
  </h1>
<p class="mt-5 text-sm text-gray-600 leading-relaxed max-w-sm">
    To get your <strong>20% discount</strong> on your annual <strong>Squarespace</strong>
    subscription enter your e‑mail address and a link to the Squarespace theme you want to use.
  </p>
<p class="mt-4 text-xs text-gray-500 leading-relaxed max-w-sm">
<span class="font-medium">How it works:</span> a trial site will be created and you will
    get an invite email from Squarespace. After you accept the invite you can delete our account.
    Choose annual billing to get 20% off on your first payment.
  </p>
</header>
<!-- Form card (very light) -->
<section class="mt-8">
<form class="space-y-5" id="request-form" novalidate="">
<div>
<label class="block text-sm font-medium" for="email">Your E‑Mail:</label>
<input autocomplete="email" class="mt-2 w-full rounded-full border border-gray-300 px-4 py-2.5 focus:border-black" id="email" name="email" placeholder="you@example.com" required="" type="email"/>
</div>
<div>
<label class="block text-sm font-medium" for="templateUrl">Paste Link To Squarespace Theme:</label>
<input class="mt-2 w-full rounded-full border border-gray-300 px-4 py-2.5 focus:border-black" id="templateUrl" inputmode="url" name="templateUrl" placeholder="https://www.squarespace.com/templates/your-theme" type="url"/>
</div>
<!-- Honeypot -->
<div aria-hidden="true" class="hidden">
<label>Leave this field empty</label>
<input autocomplete="off" id="company" name="company" tabindex="-1" type="text"/>
</div>
<button class="w-full rounded-full bg-black text-white py-2.5 text-sm font-medium hover:bg-gray-900 focus-visible:outline-black" type="submit">
            Create Website
          </button>
<p aria-live="polite" class="text-center text-sm text-gray-600" id="form-msg" role="status"></p>
<p class="mt-1 text-center text-xs text-gray-500">
            We will not send you any newsletters.
          </p>
</form>
</section>
<footer class="mt-14 text-center">
<p class="text-[11px] text-gray-400">
          This is a 100% free service by <a class="underline decoration-gray-300 hover:decoration-gray-700" href="https://studiovis.at" rel="noopener noreferrer" target="_blank">webdesign studio vis</a>.
        </p>
</footer>
</div>
</main>
<script>
    // === CONFIG ===
    const OWNER_EMAIL = "start@studiovis.at"; // same inbox as vorher

    // Validation (simplified): accept empty or any URL that contains "squarespace.com"
    const isValidEmail = v => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    const isValidTemplateUrl = v => {
      if (!v) return true; // optional
      return /squarespace\.com/i.test(v);
    };

    const form = document.getElementById("request-form");
    const msg  = document.getElementById("form-msg");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      msg.textContent = "";
      msg.className = "text-center text-sm text-gray-600";

      const email = document.getElementById("email").value.trim();
      const templateUrl = document.getElementById("templateUrl").value.trim();
      const spamTrap = document.getElementById("company").value.trim();

      if (spamTrap) return;
      if (!email || !isValidEmail(email)) { msg.textContent = "Enter a valid email address."; return; }
      if (!isValidTemplateUrl(templateUrl)) { msg.textContent = "Enter any link that contains squarespace.com (or leave it empty)."; return; }

      const submitBtn = form.querySelector('button[type="submit"]');
      const prevLabel = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = "Sending…";

      try {
        const payload = {
          Email: email,
          TemplateURL: templateUrl || "(blank)",
          Choice: templateUrl ? "Template link" : "Blank Template",
          _subject: `New Squarespace request`,
          _template: "table",
          _captcha: "false"
        };

        const res = await fetch(`https://formsubmit.co/ajax/${OWNER_EMAIL}`, {
          method: "POST",
          headers: { "Content-Type": "application/json", "Accept": "application/json" },
          body: JSON.stringify(payload)
        });

        const data = await res.json().catch(() => ({}));

        if (res.ok) {
          msg.innerHTML = "✔ Request sent. <strong>The Squarespace invite will arrive within 5 minutes.</strong>";
          msg.className = "mt-4 rounded-xl bg-emerald-50 border border-emerald-200 text-emerald-900 px-4 py-3 text-base font-medium text-center";
          form.reset();
        } else {
          msg.textContent = data.message || "There was a problem sending your request. Please try again.";
        }
      } catch {
        msg.textContent = "Network error. Please try again.";
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = prevLabel;
      }
    });
  </script>
</body>
</html>
